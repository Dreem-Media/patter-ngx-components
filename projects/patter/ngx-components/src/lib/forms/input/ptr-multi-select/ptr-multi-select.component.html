<label class="gfield_label gform-field-label" [attr.for]="inputId"
  [class.gfield--input-wrapper--label-inline]="labelPosition === 'inline'">{{ label }}</label>
@if(description){
<div class="gfield_description">{{description}}</div>
}
<div class="gfield--input-wrapper ginput_container"
  [class.gfield--input-wrapper--label-inline]="labelPosition === 'inline'">

  <button #selectButton type="button" class="multi-select-button" [attr.id]="inputId" [attr.aria-haspopup]="'listbox'"
    [attr.aria-expanded]="dialogList.isOpen()" [attr.aria-labelledby]="labelId" (click)="toggleDialog()">
    <span [attr.id]="labelId" class="select-display">
      @if (selectedOptions().length === 0) {
        <span class="placeholder">{{effectivePlaceholder()}}</span>
      } @else {
        <div class="selected-items">
          @for (option of selectedOptions(); track option.value) {
            <span class="selected-chip">
              {{option.label}}
              <button type="button" class="remove-chip" (click)="removeSelectedItem(option.value); $event.stopPropagation()"
                [attr.aria-label]="'Remove ' + option.label">
                ×
              </button>
            </span>
          }
        </div>
      }
    </span>
    <span class="select-arrow">⏷</span>
  </button>

  @if (labelPosition === 'inline') {
  <fieldset aria-hidden="true" class="input-fieldset">
    <legend class="input-legend gfield_label gform-field-label gform-field-label--hidden">
      <span>{{label}}</span>
    </legend>
  </fieldset>
  }

  <ptr-multi-dialog-list #dialogList [options]="options" [selectedValues]="value()" [maxSelections]="maxSelections"
    [showSelectAll]="showSelectAll" (selectionChange)="onSelectionChanged($event)" [showSearch]="showSearch" />

</div>
